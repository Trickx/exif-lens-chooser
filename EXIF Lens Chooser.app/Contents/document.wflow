<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>AMApplicationBuild</key>
	<string>381</string>
	<key>AMApplicationVersion</key>
	<string>2.4</string>
	<key>AMDocumentVersion</key>
	<string>2</string>
	<key>actions</key>
	<array>
		<dict>
			<key>action</key>
			<dict>
				<key>AMAccepts</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<false/>
					<key>Types</key>
					<array>
						<string>*</string>
					</array>
				</dict>
				<key>AMActionVersion</key>
				<string>v.1.0.2</string>
				<key>AMApplication</key>
				<array>
					<string>Automator</string>
				</array>
				<key>AMParameterProperties</key>
				<dict>
					<key>variableUUID</key>
					<dict>
						<key>isPathPopUp</key>
						<false/>
						<key>selectedVariableUUID</key>
						<string>08C3B25E-C6D8-4F02-858B-E4E75E2E9298</string>
						<key>variableUUIDsInMenu</key>
						<array/>
					</dict>
				</dict>
				<key>AMProvides</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Types</key>
					<array>
						<string>*</string>
					</array>
				</dict>
				<key>AMRequiredResources</key>
				<array/>
				<key>ActionBundlePath</key>
				<string>/System/Library/Automator/Set Value of Variable.action</string>
				<key>ActionName</key>
				<string>Set Value of Variable</string>
				<key>ActionNameComment</key>
				<string>save input files to variable</string>
				<key>ActionParameters</key>
				<dict>
					<key>variableUUID</key>
					<string>08C3B25E-C6D8-4F02-858B-E4E75E2E9298</string>
				</dict>
				<key>BundleIdentifier</key>
				<string>com.apple.Automator.Set_Value_of_Variable</string>
				<key>CFBundleVersion</key>
				<string>1.0.2</string>
				<key>CanShowSelectedItemsWhenRun</key>
				<true/>
				<key>CanShowWhenRun</key>
				<true/>
				<key>Category</key>
				<array>
					<string>AMCategoryUtilities</string>
				</array>
				<key>Class Name</key>
				<string>Set_Value_of_Variable</string>
				<key>InputUUID</key>
				<string>DCBE6198-C2E2-4744-9B4C-062247B7EC15</string>
				<key>Keywords</key>
				<array>
					<string>variable</string>
					<string>binding</string>
					<string>input</string>
					<string>output</string>
					<string>storage</string>
				</array>
				<key>OutputUUID</key>
				<string>01D8F4E2-BD91-4CCA-9E69-EEECEC254424</string>
				<key>UUID</key>
				<string>C91DB5E4-09B3-41C7-8487-6B4CD67A3D90</string>
				<key>UnlocalizedApplications</key>
				<array>
					<string>Automator</string>
				</array>
				<key>arguments</key>
				<dict>
					<key>0</key>
					<dict>
						<key>default value</key>
						<string></string>
						<key>name</key>
						<string>variableUUID</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>0</string>
					</dict>
				</dict>
				<key>isViewVisible</key>
				<false/>
				<key>location</key>
				<string>632.500000:1036.000000</string>
				<key>nibPath</key>
				<string>/System/Library/Automator/Set Value of Variable.action/Contents/Resources/Base.lproj/main.nib</string>
			</dict>
			<key>isViewVisible</key>
			<false/>
		</dict>
		<dict>
			<key>action</key>
			<dict>
				<key>AMAccepts</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<true/>
					<key>Types</key>
					<array>
						<string>com.apple.applescript.object</string>
					</array>
				</dict>
				<key>AMActionVersion</key>
				<string>1.0.2</string>
				<key>AMApplication</key>
				<array>
					<string>Automator</string>
				</array>
				<key>AMParameterProperties</key>
				<dict>
					<key>source</key>
					<dict/>
				</dict>
				<key>AMProvides</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Types</key>
					<array>
						<string>com.apple.applescript.object</string>
					</array>
				</dict>
				<key>ActionBundlePath</key>
				<string>/System/Library/Automator/Run AppleScript.action</string>
				<key>ActionName</key>
				<string>Run AppleScript</string>
				<key>ActionNameComment</key>
				<string>show prompt for lens selection</string>
				<key>ActionParameters</key>
				<dict>
					<key>source</key>
					<string>on run {parameters}

	set lens_selection to choose from list {"Nikkor 28 mm f/2.8 AIS", "Vivitar 28 mm f/2.0 MC Close Focus", "Nikon 50 mm f/1.8 Series E", "Nikkor 50 mm f/2.0", "Micro-Nikkor 55 mm f/3.5 AI", "Nikkor 105 mm f/2.5 AI", "Micro-Nikkor 105 mm f/4 AIS", "Nikkor 135 mm f/2.0 AI", "Nikkor 200 mm f/4.0 AI", "Nikkor 400 mm f/5.6 ED-IF", "Nikkor 50-135 mm f/3.5 AIS", "Nikon 75-150 mm f/3.5 Series E", "Vivitar Series 1 28-90 mm f/2.8-3.5", "Nikkor 28 mm f/2.0 AIS", "Nikkor H Auto 28 mm f/3.5"} with prompt "Select Lens:"

	return lens_selection
end run</string>
				</dict>
				<key>BundleIdentifier</key>
				<string>com.apple.Automator.RunScript</string>
				<key>CFBundleVersion</key>
				<string>1.0.2</string>
				<key>CanShowSelectedItemsWhenRun</key>
				<false/>
				<key>CanShowWhenRun</key>
				<true/>
				<key>Category</key>
				<array>
					<string>AMCategoryUtilities</string>
				</array>
				<key>Class Name</key>
				<string>RunScriptAction</string>
				<key>IgnoresInput</key>
				<true/>
				<key>InputUUID</key>
				<string>1B4952D8-0249-400E-A0A4-49B9B6590CE2</string>
				<key>Keywords</key>
				<array>
					<string>Run</string>
				</array>
				<key>OutputUUID</key>
				<string>1B2E4D99-A42F-4F5E-BF9E-BD6FEA69CF0A</string>
				<key>UUID</key>
				<string>D373FFFE-0740-4ABD-8E3E-27837B542E91</string>
				<key>UnlocalizedApplications</key>
				<array>
					<string>Automator</string>
				</array>
				<key>arguments</key>
				<dict>
					<key>0</key>
					<dict>
						<key>default value</key>
						<string>on run {input, parameters}

	(* Your script goes here *)

	return input
end run</string>
						<key>name</key>
						<string>source</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>0</string>
					</dict>
				</dict>
				<key>isViewVisible</key>
				<true/>
				<key>location</key>
				<string>632.500000:994.000000</string>
				<key>nibPath</key>
				<string>/System/Library/Automator/Run AppleScript.action/Contents/Resources/English.lproj/main.nib</string>
			</dict>
			<key>isViewVisible</key>
			<true/>
		</dict>
		<dict>
			<key>action</key>
			<dict>
				<key>AMAccepts</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<false/>
					<key>Types</key>
					<array>
						<string>*</string>
					</array>
				</dict>
				<key>AMActionVersion</key>
				<string>v.1.0.2</string>
				<key>AMApplication</key>
				<array>
					<string>Automator</string>
				</array>
				<key>AMParameterProperties</key>
				<dict>
					<key>variableUUID</key>
					<dict>
						<key>isPathPopUp</key>
						<false/>
						<key>selectedVariableUUID</key>
						<string>76FC96C4-7B66-4E06-A477-CC2670096684</string>
						<key>variableUUIDsInMenu</key>
						<array/>
					</dict>
				</dict>
				<key>AMProvides</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Types</key>
					<array>
						<string>*</string>
					</array>
				</dict>
				<key>AMRequiredResources</key>
				<array/>
				<key>ActionBundlePath</key>
				<string>/System/Library/Automator/Set Value of Variable.action</string>
				<key>ActionName</key>
				<string>Set Value of Variable</string>
				<key>ActionNameComment</key>
				<string>save selected lens to variable</string>
				<key>ActionParameters</key>
				<dict>
					<key>variableUUID</key>
					<string>76FC96C4-7B66-4E06-A477-CC2670096684</string>
				</dict>
				<key>BundleIdentifier</key>
				<string>com.apple.Automator.Set_Value_of_Variable</string>
				<key>CFBundleVersion</key>
				<string>1.0.2</string>
				<key>CanShowSelectedItemsWhenRun</key>
				<true/>
				<key>CanShowWhenRun</key>
				<true/>
				<key>Category</key>
				<array>
					<string>AMCategoryUtilities</string>
				</array>
				<key>Class Name</key>
				<string>Set_Value_of_Variable</string>
				<key>InputUUID</key>
				<string>E50B17E8-5BF5-4901-83DE-C63C49AEE226</string>
				<key>Keywords</key>
				<array>
					<string>variable</string>
					<string>binding</string>
					<string>input</string>
					<string>output</string>
					<string>storage</string>
				</array>
				<key>OutputUUID</key>
				<string>4BBA0937-11B2-4457-B513-7D13FC212272</string>
				<key>UUID</key>
				<string>C8C61272-C9A1-458E-B91E-A09FBDD32C3F</string>
				<key>UnlocalizedApplications</key>
				<array>
					<string>Automator</string>
				</array>
				<key>arguments</key>
				<dict>
					<key>0</key>
					<dict>
						<key>default value</key>
						<string></string>
						<key>name</key>
						<string>variableUUID</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>0</string>
					</dict>
				</dict>
				<key>isViewVisible</key>
				<false/>
				<key>location</key>
				<string>632.500000:681.000000</string>
				<key>nibPath</key>
				<string>/System/Library/Automator/Set Value of Variable.action/Contents/Resources/Base.lproj/main.nib</string>
			</dict>
			<key>isViewVisible</key>
			<false/>
		</dict>
		<dict>
			<key>action</key>
			<dict>
				<key>AMAccepts</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<true/>
					<key>Types</key>
					<array>
						<string>*</string>
					</array>
				</dict>
				<key>AMActionVersion</key>
				<string>v.1.0.2</string>
				<key>AMApplication</key>
				<array>
					<string>Automator</string>
				</array>
				<key>AMParameterProperties</key>
				<dict>
					<key>variableUUID</key>
					<dict>
						<key>isPathPopUp</key>
						<false/>
						<key>selectedVariableUUID</key>
						<string>76FC96C4-7B66-4E06-A477-CC2670096684</string>
						<key>variableUUIDsInMenu</key>
						<array/>
					</dict>
				</dict>
				<key>AMProvides</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<true/>
					<key>Types</key>
					<array>
						<string>com.apple.applescript.object</string>
					</array>
				</dict>
				<key>AMRequiredResources</key>
				<array/>
				<key>ActionBundlePath</key>
				<string>/System/Library/Automator/Get Value of Variable.action</string>
				<key>ActionName</key>
				<string>Get Value of Variable</string>
				<key>ActionNameComment</key>
				<string>retrieve selected lens from variable</string>
				<key>ActionParameters</key>
				<dict>
					<key>variableUUID</key>
					<string>76FC96C4-7B66-4E06-A477-CC2670096684</string>
				</dict>
				<key>BundleIdentifier</key>
				<string>com.apple.Automator.Get_Value_of_Variable</string>
				<key>CFBundleVersion</key>
				<string>1.0.2</string>
				<key>CanShowSelectedItemsWhenRun</key>
				<false/>
				<key>CanShowWhenRun</key>
				<true/>
				<key>Category</key>
				<array>
					<string>AMCategoryUtilities</string>
				</array>
				<key>Class Name</key>
				<string>Get_Value_of_Variable</string>
				<key>IgnoresInput</key>
				<true/>
				<key>InputUUID</key>
				<string>1E4AD0FF-560C-4C9C-B942-F9BC2407AA8E</string>
				<key>Keywords</key>
				<array>
					<string>variable</string>
					<string>binding</string>
					<string>input</string>
					<string>output</string>
					<string>storage</string>
				</array>
				<key>OutputUUID</key>
				<string>B9F6C5AB-FA93-49B8-BACA-DD6247C25D87</string>
				<key>UUID</key>
				<string>612FE2A8-68FB-417E-AE52-28BD5D88CA84</string>
				<key>UnlocalizedApplications</key>
				<array>
					<string>Automator</string>
				</array>
				<key>arguments</key>
				<dict>
					<key>0</key>
					<dict>
						<key>default value</key>
						<string></string>
						<key>name</key>
						<string>variableUUID</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>0</string>
					</dict>
				</dict>
				<key>isViewVisible</key>
				<false/>
				<key>location</key>
				<string>632.500000:639.000000</string>
				<key>nibPath</key>
				<string>/System/Library/Automator/Get Value of Variable.action/Contents/Resources/Base.lproj/main.nib</string>
			</dict>
			<key>isViewVisible</key>
			<false/>
		</dict>
		<dict>
			<key>action</key>
			<dict>
				<key>AMAccepts</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<true/>
					<key>Types</key>
					<array>
						<string>com.apple.applescript.object</string>
					</array>
				</dict>
				<key>AMActionVersion</key>
				<string>1.0.2</string>
				<key>AMApplication</key>
				<array>
					<string>Automator</string>
				</array>
				<key>AMParameterProperties</key>
				<dict>
					<key>source</key>
					<dict/>
				</dict>
				<key>AMProvides</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Types</key>
					<array>
						<string>com.apple.applescript.object</string>
					</array>
				</dict>
				<key>ActionBundlePath</key>
				<string>/System/Library/Automator/Run AppleScript.action</string>
				<key>ActionName</key>
				<string>Run AppleScript</string>
				<key>ActionParameters</key>
				<dict>
					<key>source</key>
					<string>on run {input, parameters}
	if input is {false} then
		tell me to quit
	else
		return input
	end if
end run</string>
				</dict>
				<key>BundleIdentifier</key>
				<string>com.apple.Automator.RunScript</string>
				<key>CFBundleVersion</key>
				<string>1.0.2</string>
				<key>CanShowSelectedItemsWhenRun</key>
				<false/>
				<key>CanShowWhenRun</key>
				<true/>
				<key>Category</key>
				<array>
					<string>AMCategoryUtilities</string>
				</array>
				<key>Class Name</key>
				<string>RunScriptAction</string>
				<key>IgnoresInput</key>
				<false/>
				<key>InputUUID</key>
				<string>9948DCC7-7680-4080-976F-313159AD0CF1</string>
				<key>Keywords</key>
				<array>
					<string>Run</string>
				</array>
				<key>OutputUUID</key>
				<string>9162013A-2A17-4960-81C6-33D34EB8BC85</string>
				<key>UUID</key>
				<string>40BF3D24-F96B-4812-BA3F-91B1530AE9A4</string>
				<key>UnlocalizedApplications</key>
				<array>
					<string>Automator</string>
				</array>
				<key>arguments</key>
				<dict>
					<key>0</key>
					<dict>
						<key>default value</key>
						<string>on run {input, parameters}

	(* Your script goes here *)

	return input
end run</string>
						<key>name</key>
						<string>source</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>0</string>
					</dict>
				</dict>
				<key>isViewVisible</key>
				<true/>
				<key>location</key>
				<string>632.500000:597.000000</string>
				<key>nibPath</key>
				<string>/System/Library/Automator/Run AppleScript.action/Contents/Resources/English.lproj/main.nib</string>
			</dict>
			<key>isViewVisible</key>
			<true/>
		</dict>
		<dict>
			<key>action</key>
			<dict>
				<key>AMAccepts</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<true/>
					<key>Types</key>
					<array>
						<string>*</string>
					</array>
				</dict>
				<key>AMActionVersion</key>
				<string>v.1.0.2</string>
				<key>AMApplication</key>
				<array>
					<string>Automator</string>
				</array>
				<key>AMParameterProperties</key>
				<dict>
					<key>variableUUID</key>
					<dict>
						<key>isPathPopUp</key>
						<false/>
						<key>selectedVariableUUID</key>
						<string>08C3B25E-C6D8-4F02-858B-E4E75E2E9298</string>
						<key>variableUUIDsInMenu</key>
						<array/>
					</dict>
				</dict>
				<key>AMProvides</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<true/>
					<key>Types</key>
					<array>
						<string>com.apple.cocoa.string</string>
					</array>
				</dict>
				<key>AMRequiredResources</key>
				<array/>
				<key>ActionBundlePath</key>
				<string>/System/Library/Automator/Get Value of Variable.action</string>
				<key>ActionName</key>
				<string>Get Value of Variable</string>
				<key>ActionNameComment</key>
				<string>retrieve files from variable</string>
				<key>ActionParameters</key>
				<dict>
					<key>variableUUID</key>
					<string>08C3B25E-C6D8-4F02-858B-E4E75E2E9298</string>
				</dict>
				<key>BundleIdentifier</key>
				<string>com.apple.Automator.Get_Value_of_Variable</string>
				<key>CFBundleVersion</key>
				<string>1.0.2</string>
				<key>CanShowSelectedItemsWhenRun</key>
				<false/>
				<key>CanShowWhenRun</key>
				<true/>
				<key>Category</key>
				<array>
					<string>AMCategoryUtilities</string>
				</array>
				<key>Class Name</key>
				<string>Get_Value_of_Variable</string>
				<key>InputUUID</key>
				<string>E4574EA9-566C-4EA3-A7F6-B4260C73FF29</string>
				<key>Keywords</key>
				<array>
					<string>variable</string>
					<string>binding</string>
					<string>input</string>
					<string>output</string>
					<string>storage</string>
				</array>
				<key>OutputUUID</key>
				<string>C4ACE000-32ED-4727-A765-F00F3CB14318</string>
				<key>UUID</key>
				<string>FA1E1CAC-5FB0-4282-96D9-C45993D3B1A3</string>
				<key>UnlocalizedApplications</key>
				<array>
					<string>Automator</string>
				</array>
				<key>arguments</key>
				<dict>
					<key>0</key>
					<dict>
						<key>default value</key>
						<string></string>
						<key>name</key>
						<string>variableUUID</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>0</string>
					</dict>
				</dict>
				<key>isViewVisible</key>
				<false/>
				<key>location</key>
				<string>632.500000:104.000000</string>
				<key>nibPath</key>
				<string>/System/Library/Automator/Get Value of Variable.action/Contents/Resources/Base.lproj/main.nib</string>
			</dict>
			<key>isViewVisible</key>
			<false/>
		</dict>
		<dict>
			<key>action</key>
			<dict>
				<key>AMAccepts</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Optional</key>
					<true/>
					<key>Types</key>
					<array>
						<string>com.apple.cocoa.string</string>
					</array>
				</dict>
				<key>AMActionVersion</key>
				<string>2.0.3</string>
				<key>AMApplication</key>
				<array>
					<string>Automator</string>
				</array>
				<key>AMParameterProperties</key>
				<dict>
					<key>COMMAND_STRING</key>
					<dict/>
					<key>CheckedForUserDefaultShell</key>
					<dict/>
					<key>inputMethod</key>
					<dict/>
					<key>shell</key>
					<dict/>
					<key>source</key>
					<dict/>
				</dict>
				<key>AMProvides</key>
				<dict>
					<key>Container</key>
					<string>List</string>
					<key>Types</key>
					<array>
						<string>com.apple.cocoa.string</string>
					</array>
				</dict>
				<key>ActionBundlePath</key>
				<string>/System/Library/Automator/Run Shell Script.action</string>
				<key>ActionName</key>
				<string>Run Shell Script</string>
				<key>ActionNameComment</key>
				<string>modify EXIF to files based using exiftool</string>
				<key>ActionParameters</key>
				<dict>
					<key>COMMAND_STRING</key>
					<string>
lens_name="$1"
shift

lens_params=''

# for primes
focal_length=''
max_aperture=''

# for zooms
focal_length_min=''
focal_length_max=''
max_aperture_at_min_fl=''
max_aperture_at_max_fl=''


case "$lens_name" in
	'Nikkor 28 mm f/2.8 AIS')
		focal_length='28'
		max_aperture='2.8'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='6.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
         		"
	;;

	'Vivitar 28 mm f/2.0 MC Close Focus')
		focal_length='28'
		max_aperture='2.0'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='6.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
      			"
	;;

	'Nikon 50 mm f/1.8 Series E')
		focal_length='50'
		max_aperture='1.8'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='7.33' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

	'Nikkor 50 mm f/2.0')
		focal_length='50'
		max_aperture='2.0'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='6.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

	'Micro-Nikkor 55 mm f/3.5 AI')
		focal_length='55'
		max_aperture='3.5'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='6.33' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

	'Nikkor 105 mm f/2.5 AI')
		focal_length='105'
		max_aperture='2.5'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='6.33' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

	'Micro-Nikkor 105 mm f/4 AIS')
		focal_length='105'
		max_aperture='4.0'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='6.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

 	'Nikkor 135 mm f/2.0 AI')
		focal_length='135'
		max_aperture='2.0'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='7.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
 	;;

	'Nikkor 200 mm f/4.0 AI')
		focal_length='200'
		max_aperture='4.0'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='6.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

	'Nikkor 400 mm f/5.6 ED-IF')
		focal_length='400'
		max_aperture='5.6'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='5.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

	'Nikkor 50-135 mm f/3.5 AIS')
		focal_length_min='50'
		focal_length_max='135'
		max_aperture_at_min_fl='3.5'
		max_aperture_at_max_fl='3.5'
		lens_params="\
					-AFAperture='$max_aperture_at_min_fl' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture_at_max_fl' \
					-FocalLength='$focal_length_min' \
					-Lens='$lens_name' \
					-LensFStops='6.33' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture_at_max_fl' \
					-MaxApertureAtMinFocal='$max_aperture_at_min_fl' \
					-MaxApertureValue='$max_aperture_min_fl' \
					-MaxFocalLength='$focal_length_max' \
					-MinFocalLength='$focal_length_min' \
					-LensSpecification='$focal_length_min, $focal_length_max, $max_aperture_at_min_fl, $max_aperture_at_max_fl' \
					-LensID='$lens_name' \
					-AutoFocus='Off' \
					-DepthOfField='' \
					-HyperfocalDistance='' \
					-ExitPupilPosition='0' \
					-FieldOfView='' \
					-FocusMode='Manual' \
					-LensIDNumber='0' \
					-PhaseDetectAF='Off' \
					"
	;;

	'Nikon 75-150 mm f/3.5 Series E')
		focal_length_min='75'
		focal_length_max='150'
		max_aperture_at_min_fl='3.5'
		max_aperture_at_max_fl='3.5'
		lens_params="\
					-AFAperture='$max_aperture_at_min_fl' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture_at_max_fl' \
					-FocalLength='$focal_length_min' \
					-Lens='$lens_name' \
					-LensFStops='6.33' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture_at_max_fl' \
					-MaxApertureAtMinFocal='$max_aperture_at_min_fl' \
					-MaxApertureValue='$max_aperture_at_min_fl' \
					-MaxFocalLength='$focal_length_max' \
					-MinFocalLength='$focal_length_min' \
					"
	;;

	'Vivitar Series 1 28-90 mm f/2.8-3.5')
		focal_length_min='28'
		focal_length_max='90'
		max_aperture_at_min_fl='2.8'
		max_aperture_at_max_fl='3.5'
		lens_params="\
					-AFAperture='$max_aperture_at_min_fl' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture_at_max_fl' \
					-FocalLength='$focal_length_min' \
					-Lens='$lens_name' \
					-LensFStops='5.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture_at_max_fl' \
					-MaxApertureAtMinFocal='$max_aperture_at_min_fl' \
					-MaxApertureValue='$max_aperture_at_min_fl' \
					-MaxFocalLength='$focal_length_max' \
					-MinFocalLength='$focal_length_min' \
					"
	;;



	# old lenses I no longer have:

	'Nikkor 28 mm f/2.0 AIS')
		focal_length='28'
		max_aperture='2.0'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='7.00' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;

	'Nikkor H Auto 28 mm f/3.5')
		focal_length='28'
		max_aperture='3.5'
		lens_params="\
					-AFAperture='$max_aperture' \
					-DNGLensInfo='$lens_name' \
					-EffectiveMaxAperture='$max_aperture' \
					-FocalLength='$focal_length' \
					-Lens='$lens_name' \
					-LensFStops='4.33' \
					-LensInfo='$lens_name' \
					-LensModel='$lens_name' \
					-LensType='MF' \
					-MaxApertureAtMaxFocal='$max_aperture' \
					-MaxApertureAtMinFocal='$max_aperture' \
					-MaxApertureValue='$max_aperture' \
					-MaxFocalLength='$focal_length' \
					-MinFocalLength='$focal_length' \
					"
	;;


esac

#######################


# function to calculate "35mm  Effective Focal Length"
function calc35mmFocalLength()
{
	local fileName="$1"
	local focalLength="$2"

	local camera=$(exiftool -Model "$fileName" | cut -d : -f 2 | sed 's/^ *//')

	case "$camera" in

	    'NIKON D70S' | 'NIKON D300' | 'NIKON D7000' | 'NIKON D7100')
			local conversionFactor='1.5'
	    ;;

	    'NIKON D700' | 'NIKON D3' | 'NIKON D3S' | 'NIKON D600' | 'NIKON D610' | 'NIKON D800' | 'NIKON D800E' | 'NIKON DF' | 'NIKON D810' | 'NIKON D750')
			local conversionFactor='1.0'
	    ;;

	esac

	local focalLength35mm=$(echo "$conversionFactor * $focalLength" | bc -l)

	echo $focalLength35mm
}


# need to have "$@" properly escaped!
# loop over each file
RESULT=""

for file in "$@"
do
	focalLength35mmParam=""

	# if a zoom defines a min focal length, use that as effective focal length
	#  can be overridden if focal_length is still defined in block
	if [ "$focal_length" == "" -a "$focal_length_min" != "" ]
	then
		focal_length="$focal_length_min"
	fi

	if [ "$focal_length" != "" ]
	then
		focalLength35mm=$(calc35mmFocalLength "$file" "$focal_length" )
		focalLength35mmParam="-FocalLengthIn35mmFormat='$focalLength35mm'"
	fi

	cmd="exiftool -overwrite_original $lens_params $focalLength35mmParam \"$file\""

	# update the EXIF info in file(s)
	RESULT="$RESULT $file = $(eval $cmd)\n"
done



# Write output and gather stats

EXIF_FILE='exif-lens-chooser.txt'
EXIF_PATH_DISPLAY='~'
EXIF_PATH="/Users/$(id -un)"
EXIF_FULL_PATH="$EXIF_PATH/$EXIF_FILE"


echo -e "$RESULT" &gt; "$EXIF_PATH/$EXIF_FILE"

NUM_GOOD=$(grep -c '1 image files updated' "$EXIF_FULL_PATH" )
NUM_BAD=$(grep -c '0 image files updated' "$EXIF_FULL_PATH" )


if [ "$NUM_BAD" -gt "0" ]
then
	# couldn't update some files
	SUBTITLE_TEXT="Updated: $NUM_GOOD, NOT Updated: $NUM_BAD"
	MESSAGE_TEXT="See $EXIF_PATH_DISPLAY/$EXIF_FILE"
else
	# all files updated, remove file
	rm "$EXIF_FULL_PATH"
	SUBTITLE_TEXT="Success!"
	MESSAGE_TEXT="Files updated: $NUM_GOOD"
fi

TITLE_TEXT="EXIF Update Complete"
SOUND="Hero"



# Show notification
if true
then
	if type terminal-notifier &gt; /dev/null
	then
   	terminal-notifier -message "$MESSAGE_TEXT" -title "$TITLE_TEXT" -subtitle "$SUBTITLE_TEXT" -sound "$SOUND" -sender "com.apple.automator.EXIF Lens Chooser"
	else
		osascript -e "display notification \"$MESSAGE_TEXT\" with title \"$TITLE_TEXT\" subtitle \"$SUBTITLE_TEXT\" sound name \"$SOUND\" "
	fi
fi

</string>
					<key>CheckedForUserDefaultShell</key>
					<true/>
					<key>inputMethod</key>
					<integer>1</integer>
					<key>shell</key>
					<string>/bin/bash</string>
					<key>source</key>
					<string></string>
				</dict>
				<key>BundleIdentifier</key>
				<string>com.apple.RunShellScript</string>
				<key>CFBundleVersion</key>
				<string>2.0.3</string>
				<key>CanShowSelectedItemsWhenRun</key>
				<false/>
				<key>CanShowWhenRun</key>
				<true/>
				<key>Category</key>
				<array>
					<string>AMCategoryUtilities</string>
				</array>
				<key>Class Name</key>
				<string>RunShellScriptAction</string>
				<key>InputUUID</key>
				<string>6CD967CC-7E92-4A91-91D5-BBA3ACE8BE1B</string>
				<key>Keywords</key>
				<array>
					<string>Shell</string>
					<string>Script</string>
					<string>Command</string>
					<string>Run</string>
					<string>Unix</string>
				</array>
				<key>OutputUUID</key>
				<string>C3518EEF-11BC-4575-8D75-F50D0CDBA435</string>
				<key>ShowWhenRun</key>
				<false/>
				<key>UUID</key>
				<string>FDD69353-BC0C-4E6D-B062-05B5ABF78DB3</string>
				<key>UnlocalizedApplications</key>
				<array>
					<string>Automator</string>
				</array>
				<key>arguments</key>
				<dict>
					<key>0</key>
					<dict>
						<key>default value</key>
						<integer>0</integer>
						<key>name</key>
						<string>inputMethod</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>0</string>
					</dict>
					<key>1</key>
					<dict>
						<key>default value</key>
						<string></string>
						<key>name</key>
						<string>source</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>1</string>
					</dict>
					<key>2</key>
					<dict>
						<key>default value</key>
						<false/>
						<key>name</key>
						<string>CheckedForUserDefaultShell</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>2</string>
					</dict>
					<key>3</key>
					<dict>
						<key>default value</key>
						<string></string>
						<key>name</key>
						<string>COMMAND_STRING</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>3</string>
					</dict>
					<key>4</key>
					<dict>
						<key>default value</key>
						<string>/bin/sh</string>
						<key>name</key>
						<string>shell</string>
						<key>required</key>
						<string>0</string>
						<key>type</key>
						<string>0</string>
						<key>uuid</key>
						<string>4</string>
					</dict>
				</dict>
				<key>isViewVisible</key>
				<false/>
				<key>location</key>
				<string>632.500000:62.000000</string>
				<key>nibPath</key>
				<string>/System/Library/Automator/Run Shell Script.action/Contents/Resources/English.lproj/main.nib</string>
			</dict>
			<key>isViewVisible</key>
			<false/>
		</dict>
	</array>
	<key>connectors</key>
	<dict>
		<key>04070280-0E15-40AA-B753-2C5C63A680FA</key>
		<dict>
			<key>from</key>
			<string>40BF3D24-F96B-4812-BA3F-91B1530AE9A4 - 40BF3D24-F96B-4812-BA3F-91B1530AE9A4</string>
			<key>to</key>
			<string>FA1E1CAC-5FB0-4282-96D9-C45993D3B1A3 - FA1E1CAC-5FB0-4282-96D9-C45993D3B1A3</string>
		</dict>
		<key>0F7837D8-6D80-4431-86CE-EF3953CA4CFB</key>
		<dict>
			<key>from</key>
			<string>612FE2A8-68FB-417E-AE52-28BD5D88CA84 - 612FE2A8-68FB-417E-AE52-28BD5D88CA84</string>
			<key>to</key>
			<string>40BF3D24-F96B-4812-BA3F-91B1530AE9A4 - 40BF3D24-F96B-4812-BA3F-91B1530AE9A4</string>
		</dict>
		<key>4147F90F-24C5-4B85-8337-96AABF93F674</key>
		<dict>
			<key>from</key>
			<string>C8C61272-C9A1-458E-B91E-A09FBDD32C3F - C8C61272-C9A1-458E-B91E-A09FBDD32C3F</string>
			<key>to</key>
			<string>612FE2A8-68FB-417E-AE52-28BD5D88CA84 - 612FE2A8-68FB-417E-AE52-28BD5D88CA84</string>
		</dict>
		<key>469BAF49-E94C-4515-A52C-D0BAD0462A89</key>
		<dict>
			<key>from</key>
			<string>D373FFFE-0740-4ABD-8E3E-27837B542E91 - D373FFFE-0740-4ABD-8E3E-27837B542E91</string>
			<key>to</key>
			<string>C8C61272-C9A1-458E-B91E-A09FBDD32C3F - C8C61272-C9A1-458E-B91E-A09FBDD32C3F</string>
		</dict>
		<key>56C6CAD4-C926-4DD5-A8AB-3609A1C9A1EE</key>
		<dict>
			<key>from</key>
			<string>C91DB5E4-09B3-41C7-8487-6B4CD67A3D90 - C91DB5E4-09B3-41C7-8487-6B4CD67A3D90</string>
			<key>to</key>
			<string>D373FFFE-0740-4ABD-8E3E-27837B542E91 - D373FFFE-0740-4ABD-8E3E-27837B542E91</string>
		</dict>
		<key>B58B13D3-EDFE-4652-ABCF-D599E4B78BE5</key>
		<dict>
			<key>from</key>
			<string>FA1E1CAC-5FB0-4282-96D9-C45993D3B1A3 - FA1E1CAC-5FB0-4282-96D9-C45993D3B1A3</string>
			<key>to</key>
			<string>FDD69353-BC0C-4E6D-B062-05B5ABF78DB3 - FDD69353-BC0C-4E6D-B062-05B5ABF78DB3</string>
		</dict>
	</dict>
	<key>variables</key>
	<array>
		<dict>
			<key>UUID</key>
			<string>08C3B25E-C6D8-4F02-858B-E4E75E2E9298</string>
			<key>identifier</key>
			<string>com.apple.Automator.Variable.Storage</string>
			<key>name</key>
			<string>files</string>
		</dict>
		<dict>
			<key>UUID</key>
			<string>76FC96C4-7B66-4E06-A477-CC2670096684</string>
			<key>identifier</key>
			<string>com.apple.Automator.Variable.Storage</string>
			<key>name</key>
			<string>lens_name</string>
		</dict>
	</array>
	<key>workflowMetaData</key>
	<dict>
		<key>workflowTypeIdentifier</key>
		<string>com.apple.Automator.application</string>
	</dict>
</dict>
</plist>
